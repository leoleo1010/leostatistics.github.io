<!DOCTYPE html>
<html>
<head>
    <title>Calcolo Distribuzione di Frequenza</title>
</head>
<body>
    <h1>Calcolo Distribuzione di Frequenza</h1>
    
    <!-- Spazi di input per le variabili -->
    <label for="backgroundInput">Background (Qualitativo):</label>
    <input type="text" id="backgroundInput"><br><br>
    
    <label for="ambitiousInput">Ambitious (Quantitativo Discreto):</label>
    <input type="number" id="ambitiousInput" min="0" step="1"><br><br>
    
    <label for="weightInput">Weight (Quantitativo Continuo):</label>
    <input type="number" id="weightInput" step="0.01"><br><br>
    
    <button onclick="calcolaDistribuzione()">Calcola Distribuzione</button>
    
    <h2>Risultati:</h2>
    <div id="risultati"></div>
    
    <script>
        function calcolaDistribuzione() {
            // Ottieni i valori inseriti dall'utente
            var backgroundValue = document.getElementById("backgroundInput").value;
            var ambitiousValue = parseInt(document.getElementById("ambitiousInput").value);
            var weightValue = parseFloat(document.getElementById("weightInput").value);
            
            // Leggi il file TSV (dati.tsv) e calcola la distribuzione di frequenza
            fetch('dati.tsv')
                .then(response => response.text())
                .then(data => {
                    var lines = data.split('\n');
                    var header = lines[0].split('\t');
                    var backgroundIndex = header.indexOf('Background (degree)');
                    var ambitiousIndex = header.indexOf('Ambitious (0-5)');
                    var weightIndex = header.indexOf('weight');
                    
                    var frequencyCount = {
                        background: {},
                        ambitious: {},
                        weight: {}
                    };
                    
                    for (var i = 1; i < lines.length; i++) {
                        var values = lines[i].split('\t');
                        var background = values[backgroundIndex];
                        var ambitious = parseInt(values[ambitiousIndex]);
                        var weight = parseFloat(values[weightIndex]);
                        
                        // Conta la frequenza assoluta per ciascuna variabile
                        if (!isNaN(ambitious)) {
                            if (!frequencyCount.ambitious[ambitious]) {
                                frequencyCount.ambitious[ambitious] = 1;
                            } else {
                                frequencyCount.ambitious[ambitious]++;
                            }
                        }
                        
                        if (!isNaN(weight)) {
                            var weightCategory = Math.floor(weight);
                            if (!frequencyCount.weight[weightCategory]) {
                                frequencyCount.weight[weightCategory] = 1;
                            } else {
                                frequencyCount.weight[weightCategory]++;
                            }
                        }
                        
                        if (background) {
                            if (!frequencyCount.background[background]) {
                                frequencyCount.background[background] = 1;
                            } else {
                                frequencyCount.background[background]++;
                            }
                        }
                    }
                    
                    // Visualizza i risultati
                    var risultati = document.getElementById("risultati");
                    risultati.innerHTML = "<h3>Frequenza Assoluta</h3>";
                    risultati.innerHTML += "<p>Background (" + backgroundValue + "): " + (frequencyCount.background[backgroundValue] || 0) + " occorrenze</p>";
                    risultati.innerHTML += "<p>Ambitious (" + ambitiousValue + "): " + (frequencyCount.ambitious[ambitiousValue] || 0) + " occorrenze</p>";
                    risultati.innerHTML += "<p>Weight (" + weightValue + "): " + (frequencyCount.weight[Math.floor(weightValue)] || 0) + " occorrenze</p>";
                });
        }
    </script>
</body>
</html>
